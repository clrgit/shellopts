
Have three commands/modules:
  ShellOpts
    Parse spec and execute command. If a --help or a -h option is detected,
    processing is stopped at that point and the corresponding ShellOptsHelp or
    ShellOptsH is exec(3)'ed

    Problems
      o Needs a full representation of the command to produce correct error
        messages. Or make that a module too?

  ShellOptsError
    (maybe, see above) Parse spec and emit error message

  ShellOptsHelp
    Parse spec and print help page. --format determines the output format
    (default text)

  ShellOptsH
    Parse spec and print short help page. --format determinnes the output format



Scan SPEC using indent to nest objects

  spec:
    block_element+

  block:
    INDENT block_element+ OUTDENT

  block_element:
    brief
    arguments
    option
    command
    section
    text

  brief: 
    '@' LINE

  argument_declaration: 
    ARGUMENT

  arguments:
    '--' argument_declaration+

  option_declaration:
    ('-'|'--'|'+'|'++')OPTION['='VALUE]

  option:
    option_declaration brief? text_block?
    
  command:
    COMMAND'!' option_declaration* arguments? brief? block?

  section:
    UPPERCASE block_element*

  text:
    (paragraph | code)+

  text_block:
    INDENT text OUTDENT

  paragraph:
    LINE+

  code:
    BLANK INDENT LINE+ BLANK OUTDENT

