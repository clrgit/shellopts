#!/usr/bin/env ruby

$LOAD_PATH.unshift "#{Dir.getwd}/lib"

require 'shellopts'

spec = %(
  cmd! -a
)

lexer = ShellOpts::Lexer.new("main", spec)
tokens = lexer.lex
#pp tokens

puts
parser = ShellOpts::Parser.new(tokens)
program = parser.parse

analyzer = ShellOpts::Analyzer.new(program)
analyzer.analyze

#puts
#program.dump(format: :rspec)
#puts
#program.dump(format: :debug)

__END__




#SPEC = %(
# NAME
#   Text
#)

SPEC = %(
  SYNOPSIS
    Synopsis
    are on 
    seperate lines

  DESCRIPTION
    Paragraphs
    spans over 
    multiple lines
)

lexer = ShellOpts::Lexer.new("main", SPEC)
tokens = lexer.lex
pp tokens
#puts
parser = ShellOpts::Parser.new(tokens)
program = parser.parse
program.dump(format: :debug)










#puts "--------------------------------"
#puts SPEC
#puts
#program.dump(format: :short)
#puts
#program.dump(format: :rspec)

#puts
#puts ShellOpts::Spec::Node.descendants(this: true)
#ShellOpts::Spec::Node.dump_hierarchy

#ShellOpts::Spec::Formatter.format(program, format: :rspec)
#formatter.format
#program.dump(format: :rspec)
#parser.program.dump2





__END__


opts, args = ShellOpts.process(SPEC, ARGV, version: "--ver", version_number: "1.2.3", help: "-?,help")

verb "Verbose default"
(0..3).each { |i| verb i, "Verbose #{i}" }
mesg "Message"
notice "Notice"
#debug "Debug"


