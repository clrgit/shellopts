#!/usr/bin/env ruby

$LOAD_PATH.unshift "#{Dir.getwd}/lib"

#require 'shellopts'

require 'forward_to'
include ForwardTo

require 'constrain'
include Constrain

require './lib/shellopts/ext/case.rb'
require './lib/shellopts/ext/class.rb'

require './lib/shellopts.rb'
require './lib/shellopts/ext/array.rb'
require './lib/shellopts/line.rb'
require './lib/shellopts/token.rb'
require './lib/shellopts/spec.rb'
require './lib/shellopts/grammar.rb'
require './lib/shellopts/doc.rb'
require './lib/shellopts/lexer.rb'
require './lib/shellopts/parser.rb'


#SPEC = %(-a -b)
#
#SPEC = %(
# -a @brief
# -b
#   @brief
#   Text
#)

#SPEC = %(
# -a -b @brief
# 
# -c @brief
# -d
#   @brief
#
# -e -f @brief
# -g @brief2
# -h
#   @brief3
#
#   Here is some text
#   for the option 
#   group
#
# Here is some more text
# spread over 
# multiple lines
#
# --random-option
#
# And yet some more
#)



#SPEC = %(
# -a
# -b
#
# -c
#)

#SPEC = %(
# -a @brief
#)

#SPEC = %(
# -a @brief
# -b 
#   @brief
#)

#SPEC = %(
# cmd! -a @brief
# -b 
#   @brief
#)

# Problem
#   command --opt --opt arg arg @brief
#   --opt @brief
#   --opt
#     @brief

# -a
# -b
# -c
#   Option group
#)

#SPEC = %(
# cmd1! @brief
# cmd2! @brief
#)

#SPEC = %(
# cmd!  -- AN ARG -- ANOTHER ARG
#)
#SPEC = %(
# -a -b @brief1
# -c
#   @brief2
#)

#SPEC = %(
# Text
#   
#   some_code()
#)

#SPEC = %(
# NAME
#   Name
#
#   *free*
#
#   *description*
#     gryf
#
#     *nesting*
#       Gryffelyf
#
# Some text
#)

SPEC = %(
  Text

  o Bullet1
  o Bullet2
    Some text
    * Another bullet
    Back
      - Dash bullet
        # Hash bullet
  o Bullet3

  More text
)

lexer = ShellOpts::Lexer.new("main", SPEC)
tokens = lexer.lex
#pp tokens
#puts
parser = ShellOpts::Parser.new(tokens)
program = parser.parse

parser.program.dump2





__END__


opts, args = ShellOpts.process(SPEC, ARGV, version: "--ver", version_number: "1.2.3", help: "-?,help")

verb "Verbose default"
(0..3).each { |i| verb i, "Verbose #{i}" }
mesg "Message"
notice "Notice"
#debug "Debug"


